# Конфигурация приложения

1. [Файлы конфигурации](#файлы-конфигурации)
2. [Получение конфигурации в приложении](#получение-конфигурации-в-приложении)
3. [Профиль конфигурации](#профиль-конфигурации)

## Файлы конфигурации
В приложении Metafoks существует система конфигурации, представленная в виде JSON файлов.
По-умолчанию файлы конфигурации расположены в директории `/config/` проекта.

Стандартный файл конфигурации - `/config/config.json`. При базовых настройках загружаются данные из него.

## Получение конфигурации в приложении
Чтобы получить данные конфигурации, необходимо использовать[ DI декоратор](decorators.md#di-декораторы) `@Config`. Тип данных может быть любой. Пример:

```typescript
import { Service, Config } from "metafoks-application";

interface AppConfig {
  key: 'my-value-1'
}

@Service
class MyService {
  
  @Config
  public config!: AppConfig
  
}
```

Для получения конфигурации вне основного контекста, можно использовать

```typescript
const config = MetafoksApplication.configuration as AppConfig
```
или

```typescript
const config = MetafoksApplication.getComponent<AppConfig>('config') 
```

## Профиль конфигурации
Во время загрузки приложения, может быть выбран определенный файл конфигурации из множества - с помощью профилей.
Рассмотрим на простом примере:
1. В директории `/config/` создайте файл `config.prod.json`;
2. Запустите приложение с env `METAFOKS_PROFILE=prod` ([env](env.md#переменные-окружения))
Теперь при получении данных, конфигурация будет браться не из файла `config.json`, а из `config.prod.json`.

Профиль конфигурации по-умолчанию также может быть задан с помощью [декоратора](decorators.md#декораторы-конфигурации) `@Profile`, однако, 
**его будет нельзя переопределить с помощью env параметра**.
